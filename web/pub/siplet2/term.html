<!--
TODO:
context help for editors 
plugins (which rely on help)

 -->
<HTML>
<HEAD>
 <style>
    body { 
        margin: 0; padding: 0;
    }
	@keyframes blinker {
	  50% { opacity: 0; }
    }
    a {
    	color: lightblue;
    }
</style>
<SCRIPT LANGUAGE=JavaScript>
    /*
            var pluginCode = `
                function safeExecute(input) {
                    return "<p>Plugin processed: " + input + "</p>";
                }
                var result = safeExecute("${input}");
                window.parent.postMessage(result, "*");
            `;
            // sandboxed iframe
            var iframe = document.createElement("iframe");
            iframe.setAttribute("sandbox", "allow-scripts");
            iframe.style.display = "none";
            document.body.appendChild(iframe);
            var script = iframe.contentWindow.document.createElement("script");
            script.textContent = pluginCode;
            iframe.contentWindow.document.body.appendChild(script);
            // Listen for plugin output
            window.addEventListener("message", function(event) {
                // response from plugin is listened for
            }, { once: true });
            
            const pluginWorker = new Worker('pluginWorker.js');
            pluginWorker.onmessage = function(e) {
                var content = document.getElementById("W0");
                content.innerHTML += "<p>" + e.data + "</p>";
                content.scrollTop = content.scrollHeight - content.clientHeight;
            };
            pluginWorker.postMessage(element.value);
            javascript
            self.onmessage = function(e) {
                // plugin receives input?
                var input = e.data;
                // Process input (example plugin logic)
                var output = "Plugin processed: " + input.toUpperCase();
                // Send message back to main thread
                self.postMessage(output);
            };

       */

</SCRIPT>
</HEAD>
<BODY>
<FONT COLOR=WHITE>
<SCRIPT LANGUAGE=JavaScript src="js/config.js"></SCRIPT>
<SCRIPT LANGUAGE=JavaScript src="js/input.js"></SCRIPT>
<SCRIPT LANGUAGE=JavaScript src="js/menu.js"></SCRIPT>
<SCRIPT LANGUAGE=JavaScript src="js/tabs.js"></SCRIPT>
<SCRIPT LANGUAGE=JavaScript src="js/util.js"></SCRIPT>
<SCRIPT LANGUAGE=JavaScript src="js/ctxmenu.js"></SCRIPT>
<SCRIPT LANGUAGE=JavaScript src="js/siplet.js"></SCRIPT>
<SCRIPT LANGUAGE=JavaScript src="js/binparser.js"></SCRIPT>
<SCRIPT LANGUAGE=JavaScript src="js/ansiparser.js"></SCRIPT>
<SCRIPT LANGUAGE=JavaScript src="js/telnetparser.js"></SCRIPT>
<SCRIPT LANGUAGE=JavaScript src="js/textparser.js"></SCRIPT>
<SCRIPT LANGUAGE=JavaScript src="js/mspsupport.js"></SCRIPT>
<SCRIPT LANGUAGE=JavaScript src="js/mxpsupport.js"></SCRIPT>
<div id="menuarea"></div>
<div id="tabarea"></div>
<div id="windowarea"></div>
<div id="inputarea">
    <textarea rows=3 type="text" id="input"></textarea>
</div>
<SCRIPT LANGUAGE=JavaScript>
configureInput(document.getElementById('inputarea'), document.getElementById('input'));
configureMenu(document.getElementById('menuarea'));
configureTabs(document.getElementById('tabarea'));
var tabStyle = window.getComputedStyle(document.getElementById('tabarea'));
var winAreaTop = parseInt(tabStyle.top) + parseInt(tabStyle.height) + 1;
var winAreaHeight = 'calc(100% - '+(winAreaTop+inputAreaHeight)+'px)';
window.windowArea = document.getElementById('windowarea');
window.windowArea.style.cssText='background-color:black;position:absolute;width:100%;top:'+winAreaTop+'px;height:'+winAreaHeight+';';
window.addEventListener("beforeunload", CloseAllSiplets);
LoadGlobalPhonebook();
</SCRIPT>
</FONT>
</BODY>
<HTML>